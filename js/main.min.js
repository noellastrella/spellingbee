var words;(()=>{let vowels="AEIOU".split(""),alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),consonants=alphabet.reduce((acc,curr)=>vowels.includes(curr)?acc:[...acc,curr],[]);var letters,lettersOpp,guessArray,guessesArray,score,minPossibleAllowed=20,minPossibleScore=100,wordFile="./js/wordlist/wordsFiltered.json?num="+Math.random();async function init(lettersTemp=[]){lettersOpp=[],guessArray=[],guessesArray=[],console.log(lettersTemp),lettersTemp.length>1?letters=lettersTemp:((letters=[]).push([...vowels.map(value=>({value:value,sort:Math.random()})).sort((a,b)=>a.sort-b.sort).map(({value:value})=>value).splice(0,1)]),letters.push([...consonants.map(value=>({value:value,sort:Math.random()})).sort((a,b)=>a.sort-b.sort).map(({value:value})=>value).splice(0,6)]),letters=letters.flat()),score=0,lettersOpp=alphabet.reduce((acc,curr)=>acc=letters.includes(curr)?acc:[...acc,curr],[]),updateLetters();const msg=await findMatches();(msg.words.length<20||msg.maxScore<100)&&(lettersTemp.length>1?alert(`Not enough words can be generated from ${lettersTemp.join(", ")}`):init()),document.querySelector("#possible_matches").innerHTML=msg.words.length,document.querySelector("#max_score").innerHTML=msg.maxScore}function updateLetters(){document.querySelectorAll(".hex").forEach((e,i)=>{e.addEventListener("click",addLetter),e.querySelector("polygon").setAttribute("data-letter",letters[i]),e.querySelector("text").innerHTML=letters[i]})}function addLetter(e){guessArray.push(e.target.dataset.letter),updateState(" ")}function updateState(msg=" "){document.querySelector("#word_list").innerHTML=guessesArray.reduce((acc,curr)=>acc+`<li>${curr} (${getScore(curr)})</li>`,""),document.querySelector("#text").innerText=guessArray.join(""),document.querySelector("#score").innerText=score,document.querySelector("#alert").innerHTML=msg}function findMatches(){let maxScore=0;return new Promise(resolve=>{let matches;resolve({words:words.reduce((acc,curr,i)=>{let pass=!0;return curr.includes(letters[letters.length-1].toLowerCase())?lettersOpp.forEach(e=>{curr.includes(e.toLowerCase())&&(pass=!1)}):pass=!1,pass&&(acc.push(curr),maxScore+=getScore(curr)),acc},[]),maxScore:maxScore})})}function checkWord(){let guessTemp=guessArray.join("").toLowerCase();if(!guessTemp.includes(letters[letters.length-1].toLowerCase()))return"MUST USE MIDDLE LETTER";if(words.includes(guessTemp)){if(guessesArray.includes(guessTemp))return"Word already used";{let scoreTemp=getScore(guessTemp);return guessesArray.push(guessTemp),score+=scoreTemp,guessArray=[],"..."}}return"Not a word"}function getScore(temp){return temp.length-3}document.querySelector("#custom_letters").addEventListener("submit",e=>{e.preventDefault(),init(document.querySelector("#customLetters").value.toUpperCase().split(""))}),document.querySelector("#reset").addEventListener("click",e=>{e.preventDefault(),init(),updateState()}),document.querySelector("#buttons_container").addEventListener("click",e=>{let msg=" ";"delete"===e.target.id?guessArray.pop():"submit"===e.target.id&&(msg="Enter a word",msg=guessArray.length>0&&guessArray.length<4?"Word Too Short":checkWord()),updateState(msg)}),fetch(wordFile).then(response=>{if(!response.ok)throw new Error("Network response was not ok");return response.json()}).then(data=>{words=data.reduce((acc,curr)=>(curr.length>3&&acc.push(curr),acc),[]),init()}).catch(error=>console.error("Fetch error:",error))})();